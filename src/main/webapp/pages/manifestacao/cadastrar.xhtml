<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition template="../templates/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
	
    <ui:define name="bread">
        <p:breadCrumb>
            <p:menuitem value="Home"/>
            <p:menuitem value="Cadastrar Manifestação"/>
        </p:breadCrumb>
    </ui:define>
    
    <ui:define name="content">
    	<style type="text/css">
    		.ui-state-default, .ui-widget-content .ui-state-default, .ui-widget-header .ui-state-default {
				font-weight: bold;
				color: #000;
			}
			
			.ui-selectonemenu .ui-selectonemenu-label {
				font-weight: bold;
			}
			
			.nota {
				font-weight: bold;
				color: #02364c;
				background-color: #DEDEDE;
				padding: 3px;
				margin-top: 4px;
			}
			
			.formTable {
				border-collapse: collapse;
				border: solid 2px #aed0ea;
			}
			
			.formTable > tbody > tr > td {
				border: solid 2px #aed0ea !important;
			}
			
			.ui-panelgrid td{
			    border: solid 0px #aed0ea !important;
			}
			
			.ui-panelgrid tr{
			    border: solid 0px #aed0ea !important;
			}
    	</style>
    	
        <h:form id="frmNovaManifestacao" enctype="multipart/form-data" acceptcharset="UTF-8" lang="pt_BR" style="width:1216px; margin: 0 auto">
            <p:panel id="pnlCadastroSucesso" rendered="#{mBManifestacaoCadastrar.cadastroSucesso}" >
                <p:messages id="messagesSucesso" showDetail="true" autoUpdate="true" closable="true" />  
                <p:panelGrid style="vertical-align: central">
                    <p:row>
                        <p:column>
                            <h:outputText value="Prezado(a) #{mBManifestacaoCadastrar.manifestacao.nmPessoa}, sua manifestação foi gravada e enviada com sucesso a Agência Goiana de Regulação. Anote os dados abaixo para consultas posteriores." />
                            <p:spacer width="100%" height="20px"/>
                            <h:outputText styleClass="bold" value="Número da Manifestação: #{mBManifestacaoCadastrar.manifestacao.nrManifestacao}" />
                            <p:spacer width="100%" height="20px"/>
                            <h:outputText styleClass="bold" value="Senha de acesso: #{mBManifestacaoCadastrar.manifestacao.dsSenha}" />
                            <p:spacer width="100%" height="20px"/>
                            <h:outputText value="Para acompanhar o andamento de sua manifestação, você deverá acessá-la pelo link enviado para seu e-mail, ou pelo botão localizado na página inicial do sistema utilizando o número da manifestação e a senha." />
                            <br/>
                            <h:outputText value=" Caso deseje obter informações por telefone aguarde 15 dias e ligue para 0800 704 3200 com o número da sua manifestação em mãos." />
                            <p:spacer width="100%" height="20px"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>  
            </p:panel>
            
            <p:panel id="pnlCadastroSucesso2" rendered="#{mBManifestacaoCadastrar.cadastroScript}" >
                <p:messages id="messagesSucesso2" showDetail="true" autoUpdate="true" closable="true" />  
                <p:panelGrid style="vertical-align: central">
                    <p:row>
                        <p:column>
                            <h:outputText value="Prezado(a) #{security.user.nmUsuario}, a manifestação foi registrada com sucesso. Confira os dados abaixo para consultas e informações posteriores." />
                            <p:spacer width="100%" height="20px"/>
                            <h:outputText styleClass="bold" value="Número da Manifestação: #{mBManifestacaoCadastrar.manifestacao.nrManifestacao}" />
                            <p:spacer width="100%" height="20px"/>
                            <h:outputText styleClass="bold" value="Senha de acesso: #{mBManifestacaoCadastrar.manifestacao.dsSenha}" />
                            <p:spacer width="100%" height="20px"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>  
            </p:panel>

            <p:panel id="pnlCadastroManifestacao" style="height: auto" rendered="#{not mBManifestacaoCadastrar.cadastroSucesso and not mBManifestacaoCadastrar.cadastroScript}">
                <p:messages id="messagesValidacao" showDetail="true" autoUpdate="true" closable="true" />
                
                <p:panelGrid styleClass="formTable" style="vertical-align: central; width: 100%">
                    <f:facet name="header">
                        <p:row>
                            <p:column colspan="2" >Informe os dados da Manifestação</p:column>
                        </p:row>
                    </f:facet>
                    
                    <p:row>
                        <p:column colspan="2" styleClass="nota">
							<ul>
								<li>Por favor, complete o formulário de abertura de manifestação abaixo.</li>
								<li>Você receberá um e-mail com o número da sua manifestação.</li>
								<li>Use o número para obter atualizações da sua manifestação.</li>
								<li>Os campos obrigatórios estão marcados com *</li>
							</ul>
                        </p:column>
                    </p:row>
                    
                    <p:row>
                    	<p:column style="font-weight:bold;">Tipo da Solicitação de Ouvidoria: *</p:column>
                    	<p:column>
                    		<p:selectOneRadio style="font-weight: bold;" id="tipoOuvidoria" value="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao}" required="true" requiredMessage="Informe o tipo da Solicitação">
                           		<f:selectItem itemLabel="Saneamento" itemValue="saneamento"/>
                           		<f:selectItem itemLabel="Transporte" itemValue="transporte"/>
                           		<f:selectItem itemLabel="Energia" itemValue="energia"/>
                           		<f:selectItem itemLabel="Outros" itemValue="outros"/>
                           		<p:ajax event="change" process="@this" update="@form"/>
                            </p:selectOneRadio>
                    	</p:column>
                    </p:row>

                    <p:row rendered="#{security.manifestante and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Anônimo: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneRadio id="rdAnonimo" value="#{mBManifestacaoCadastrar.anonimo}">  
                                <f:selectItem itemLabel="Não" itemValue="#{false}" />
                                <f:selectItem itemLabel="Sim" itemValue="#{true}" />
                                <p:ajax event="change" listener="#{mBManifestacaoCadastrar.setAnonimato()}" update=":frmNovaManifestacao:pnlCadastroManifestacao" />
                            </p:selectOneRadio>
                        </p:column>
                    </p:row>

                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">  
                        <p:column style="width: 22%; font-weight: bold; vertical-align: top; padding-top: 10px;">Tipo de manifestação: *</p:column>  
                        <p:column style="font-weight: bold; padding-top: 10px;">
                            <div style="width: 30%; float: left">
                                <p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.idTipoManifestacao}"
                                                 style="width: 250px"
                                                 required="true"
                                                 requiredMessage="Informe o Tipo da Manifestação" 
                                                 converter="#{conversorTipoManifestacao}"
                                                 rendered="#{not mBManifestacaoCadastrar.anonimo}"> 
                                    <f:selectItem itemLabel="- Selecione -" itemValue="" />
                                    <f:selectItems value="#{mBTipoManifestacao.todos}" 
                                                   var="tipo"
                                                   itemLabel="#{tipo.nmTipoManifestacao}"
                                                   itemValue="#{tipo}">
                                    </f:selectItems>
                                    <p:ajax update="textoDsTipoManifestacao" event="change" />
                                </p:selectOneMenu>
                                <p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.idTipoManifestacao}"
                                				 style="width: 250px"
                                				 converter="#{conversorTipoManifestacao}"
                                                 rendered="#{mBManifestacaoCadastrar.anonimo}">
                                	<p:ajax update="textoDsTipoManifestacao" event="change" />
                                	<f:selectItem itemLabel="#{mBTipoManifestacao.tipoDenuncia.nmTipoManifestacao}" itemValue="#{mBTipoManifestacao.tipoDenuncia}"/>
                                </p:selectOneMenu>
                            </div>
                            <div style="width: 70%; float: left">
                                <h:outputText id="textoDsTipoManifestacao" value="#{mBManifestacaoCadastrar.manifestacao.idTipoManifestacao.dsTipoManifestacao}" />
                            </div>
                        </p:column>
                    </p:row>
                    
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">  
                        <p:column style="font-weight: bold;">E-mail:</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputText value="#{mBManifestacaoCadastrar.manifestacao.eeEmailUsuario}" 
	                            	style="width:250px;" 
	                            	title="Informe o seu E-mail">
                                <f:validator binding="#{emailValidator}" />
                                <p:ajax event="blur" process="@this"/>
                            </p:inputText>
                            <br />
                            <div class="nota">
                            	<span>Nota: Aqui deve ser digitado somente um e-mail primário.</span>
                            </div>
                        </p:column>
                    </p:row>
                    
                    <!-- 
                    <p:row rendered="#{(security.administrador || security.ouvidor) and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Área de entrada:</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.idAreaEntrada}"
                            				 style="width: 250px"
                                             converter="#{conversorAreaEntrada}">
                                <f:selectItem itemLabel=" - Selecione -"
                                              itemValue="" />
                                <f:selectItems value="#{mBAreaEntrada.todos}"
                                               var="areaEntrada"
                                               itemLabel="#{areaEntrada.nmAreaEntrada}"
                                               itemValue="#{areaEntrada}" 
                                               />
								 <p:ajax event="change" process="@this"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row> 
                     -->
                    
                    <p:row rendered="#{!security.manifestante and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Meio de entrada:* </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.idMeioEntrada}"
                            				 required="true"
                            				 requiredMessage="Meio de entrada é um campo obrigatório"
                            				 style="width: 250px"
                                             converter="#{conversorMeioEntrada}">
                                <f:selectItem itemLabel=" - Selecione -"
                                              itemValue="" />
                                <f:selectItems value="#{mBMeioEntrada.todos}"
                                               var="meioEntrada"
                                               itemLabel="#{meioEntrada.nmMeioEntrada}"
                                               itemValue="#{meioEntrada}" 
                                               />
                                <p:ajax event="change" process="@this"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    
                    <!-- 
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo}">
                        <p:column style="font-weight: bold;">Tipo Manifestante: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneRadio id="rdTipoManifestante" value="#{mBManifestacaoCadastrar.manifestacao.tpManifestante}" required="true" requiredMessage="Informe o tipo de manifestante">
                            	<f:selectItems value="#{mBEnum.tipoManifestanteEnums}" var="tipoManifestante" itemLabel="#{tipoManifestante.descricao}" itemValue="#{tipoManifestante.id}" />
                            	<p:ajax event="change" process="@this"/>
                            </p:selectOneRadio>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo}">
                        <p:column style="font-weight: bold;">Tipo Pessoa: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneRadio id="rdTipoPessoa" value="#{mBManifestacaoCadastrar.tipoPessoaFisica}">
                                <f:selectItem itemLabel="Física" itemValue="#{true}" />
                                <f:selectItem itemLabel="Jurídica" itemValue="#{false}" />
                                <p:ajax event="change" update=":frmNovaManifestacao:pnlCadastroManifestacao" />
                            </p:selectOneRadio>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.tipoPessoaFisica}">  
                        <p:column style="font-weight: bold;">CPF:  </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputMask 	id="nrCpf"
                            				style="width: 250px"
                            				value="#{mBManifestacaoCadastrar.manifestacao.nrCpfCnpj}"
                            				mask="999.999.999-99" 
                            				maxlength="14"
                            				title="Informe um CPF"
                            				required="false"
                            				requiredMessage="Informe um CPF">
                                <f:validator binding="#{cpfValidator}" />
                                <p:ajax event="blur" process="@this"/>
                            </p:inputMask>
                            <p:watermark for="nrCpf" value="999.999.999-99" />  
                        </p:column>
                    </p:row>  
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and not mBManifestacaoCadastrar.tipoPessoaFisica}">  
                        <p:column style="font-weight: bold;">CNPJ: </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputMask	id="nrCnpj"
                            				style="width: 250px"
                            				value="#{mBManifestacaoCadastrar.manifestacao.nrCpfCnpj}"
                            				mask="99.999.999/9999-99"
                            				maxlength="19"
                            				title="Informe o CNPJ" >
                            	 <p:ajax event="blur" process="@this"/>				
                            </p:inputMask>
                            <p:watermark for="nrCnpj" value="99.999.999/9999-99" />  
                        </p:column>
                    </p:row>
                    -->
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Nome: *</p:column>  
                        <p:column style="font-weight: bold;">
							<p:inputText
								value="#{mBManifestacaoCadastrar.manifestacao.nmPessoa}"
								style="width:250px;"
								title="Informe o seu Nome"
								required="true" 
								requiredMessage="Informe o seu Nome">
								<p:ajax event="blur" process="@this"/>
							</p:inputText>
						</p:column>
                    </p:row>
                    
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'saneamento' and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                    	<p:column style="font-weight: bold;">Prestadora do Serviço:</p:column>
                    	<p:column>
	                    	<p:inputText id="ps" value="#{mBManifestacaoCadastrar.manifestacao.prestadoraServico}" style="height: 15px; width: 250px;"/>
	                    	<h:outputText rendered="#{!security.manifestante}" value="Digite ou selecione:" style="margin-left: 5px; font-weight: bold;"/>
	                    	<p:selectOneMenu rendered="#{!security.manifestante}" value="#{mBManifestacaoCadastrar.manifestacao.prestadoraServico}" style="height: 15px; margin-left: 5px;">
	                    		<f:selectItem itemLabel="----- Prestadoras ------" itemValue="#{null}" noSelectionOption="true"/>
	                    		<f:selectItems value="#{mBManifestacaoCadastrar.unidadesTransporte}" var="u" itemLabel="#{u.nmUnidade}" itemValue="#{u.nmUnidade}"/>
	                    		<p:ajax process="@this" update="ps"/>
	                    	</p:selectOneMenu>
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'saneamento'}">
                    	<p:column style="font-weight: bold;">Prestadora do Serviço:</p:column>
                    	<p:column>
	                    	<p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.prestadoraServico}" style="font-weight: bold; width:260px;">
	                    		<f:selectItem itemLabel="Saneago" itemValue="Saneago"/>
	                    	</p:selectOneMenu>
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'saneamento'}">
                    	<p:column style="font-weight: bold;">N° RA: *</p:column>
                    	<p:column>
	                    	<p:inputText value="#{mBManifestacaoCadastrar.manifestacao.ra}" style="font-weight: bold; width:250px;" required="#{security.manifestante}" requiredMessage="Informe o número do registro de atendimento">
	                    	</p:inputText>
	                    	<h:outputLabel value="Registro de atendimento da concessionária (Protocolo da SANEAGO)" style="font-weight: bold;" />
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'saneamento'}">
                    	<p:column style="font-weight: bold;">N° da Conta: *</p:column>
                    	<p:column>
	                    	<p:inputText value="#{mBManifestacaoCadastrar.manifestacao.numeroConta}" style="font-weight: bold; width:250px;" required="#{security.manifestante}"/>
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'saneamento'}">
                    	<p:column style="font-weight: bold;">Titularidade: *</p:column>
                    	<p:column>
	                    	<p:inputText value="#{mBManifestacaoCadastrar.manifestacao.titularidade}" style="font-weight: bold; width:250px;" required="#{security.manifestante}"/>
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'transporte'}">
                    	<p:column style="font-weight: bold;">Placa do veículo: </p:column>
                    	<p:column>
	                    	<p:inputMask value="#{mBManifestacaoCadastrar.manifestacao.placaVeiculo}" mask="aaa-9999" style="font-weight: bold; width:250px;"/>
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'transporte'}">
                    	<p:column style="font-weight: bold;">N.Veiculo: </p:column>
                    	<p:column>
	                    	<p:inputText value="#{mBManifestacaoCadastrar.manifestacao.numeroVeiculo}" style="font-weight: bold; width:250px;">
	                    	</p:inputText>
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'transporte'}">
                    	<p:column style="font-weight: bold;">Horário: </p:column>
                    	<p:column>
	                    	<p:inputText value="#{mBManifestacaoCadastrar.manifestacao.horario}" style="font-weight: bold; width:250px;"/>
                    	</p:column>
                    </p:row>
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'transporte'}">
                    	<p:column style="font-weight: bold;">Motorista: </p:column>
                    	<p:column>
	                    	<p:inputText value="#{mBManifestacaoCadastrar.manifestacao.motorista}" style="font-weight: bold; width:250px;"/>
                    	</p:column>
                    </p:row>
                    
                    <!-- 
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'energia'}">
                    	<p:column style="font-weight: bold;">Unidade Consumidora: *</p:column>
                    	<p:column>
	                    	<p:inputText value="#{mBManifestacaoCadastrar.manifestacao.unidadeConsumidora}" style="font-weight: bold; width:250px;" required="true" requiredMessage="Informe a unidade consumidora"/>
                    	</p:column>
                    </p:row>
                     -->
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Telefone 1: *</p:column>  
                        <p:column style="font-weight: bold;">
							<p:inputMask required="true" requiredMessage="Informe pelo menos um telefone para contato" id="nrTelefone" value="#{mBManifestacaoCadastrar.manifestacao.nrTelefone}" mask="(99)99999999?9"  maxlength="13" title="Informe um Telefone para contato" style="width: 250px" />  
							<p:watermark for="nrTelefone" value="(99)99999999" />  
                        </p:column>
                    </p:row>
                   
                   	<!-- 
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo}">
                        <p:column style="font-weight: bold;">Telefone 2: </p:column>  
                        <p:column style="font-weight: bold;">
							<p:inputMask id="nrTelefone2" value="#{mBManifestacaoCadastrar.manifestacao.nrTelefone2}" mask="(99)99999999?9"  maxlength="13" title="Informe outro Telefone para contato" style="width: 250px" />  
							<p:watermark for="nrTelefone2" value="(99)99999999" />
                        </p:column>
                    </p:row>
                   	 --> 
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Celular: </p:column>  
                        <p:column style="font-weight: bold;">
							<p:inputMask id="nrCelular" value="#{mBManifestacaoCadastrar.manifestacao.nrCelular}" mask="(99)99999999?9"  maxlength="13" title="Informe um Telefone Celular para contato" style="width: 250px" />  
							<p:watermark for="nrCelular" value="(99)99999999" />  
                        </p:column>
                    </p:row>
                    
                    <!-- 
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo}">
                        <p:column style="font-weight: bold;">FAX: </p:column>
                        <p:column style="font-weight: bold;">
                            <p:inputMask id="nrFAX" value="#{mBManifestacaoCadastrar.manifestacao.nrFAX}" mask="(99)99999999?9"  maxlength="13" style="width: 250px" title="Informe o seu FAX"  />
                            <p:watermark for="nrFAX" value="(99)99999999" />
                        </p:column>
                    </p:row>
                     -->
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">E-mail: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputText value="#{mBManifestacaoCadastrar.manifestacao.eeEmailUsuario}" 
	                            	style="width:250px;" 
	                            	title="Informe o seu E-mail"
	                            	required="true"
	             				 	requiredMessage="Informe um e-mail">
                                <f:validator binding="#{emailValidator}" />
                                <p:ajax event="blur" process="@this"/>
                            </p:inputText>
                            <br />
                            <div class="nota">
	                            <span>Nota: Aqui deve ser digitado somente um e-mail primário.</span>
                            </div>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Outros e-mails: </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputText value="#{mBManifestacaoCadastrar.manifestacao.eeEmailSecundario}"  style="width:250px;" title="Informe outros e-mails" >
                                <f:validator binding="#{emailMultiploValidator}" />
                                <p:ajax event="blur" process="@this"/>
                            </p:inputText>
                            <br />
                            <div class="nota">
	                            <span>Nota: Para enviar um e-mail para vários destinatários, utilize vírgula ou ponto-e-vírgula como separador.</span>
                            </div>
                        </p:column>
                    </p:row>
                    
                    <!--  
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.tipoPessoaFisica}">
                        <p:column style="font-weight: bold;">Sexo: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneRadio id="sexo" value="#{mBManifestacaoCadastrar.manifestacao.tpSexo}" required="true" requiredMessage="Informe um Sexo">  
                                <f:selectItems value="#{mBEnum.sexoEnums}" var="sexo" itemLabel="#{sexo.descricao}" itemValue="#{sexo.id}"/>
                            </p:selectOneRadio>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo}">
                        <p:column style="font-weight: bold;">Faixa Etária:</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.idFaixaEtaria}"
                             				 style="width: 250px" 
                                             converter="#{conversorFaixaEtaria}">
                                <f:selectItem itemLabel=" - Selecione -"
                                              itemValue="" />
                                <f:selectItems value="#{mBFaixaEtaria.todos}"
                                               var="faixaEtaria"
                                               itemLabel="#{faixaEtaria.nmFaixaEtaria}"
                                               itemValue="#{faixaEtaria}" 
                                               />
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo}">
                        <p:column style="font-weight: bold;">Grau Instrução:</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.idGrauInstrucao}"
                            				 style="width: 250px"
                                             converter="#{conversorGrauInstrucao}">
                                <f:selectItem itemLabel=" - Selecione -"
                                              itemValue="" />
                                <f:selectItems value="#{mBGrauInstrucao.todos}"
                                               var="grauInstrucao"
                                               itemLabel="#{grauInstrucao.nmGrauInstrucao}"
                                               itemValue="#{grauInstrucao}" 
                                               />
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    -->
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Meio de resposta: </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu value="#{mBManifestacaoCadastrar.manifestacao.idMeioResposta}"
                            				 style="width: 250px"
                                             converter="#{conversorMeioResposta}">
                                <f:selectItem itemLabel=" - Selecione -"
                                              itemValue="" />
                                <f:selectItems value="#{mBMeioResposta.todos}"
                                               var="meioResposta"
                                               itemLabel="#{meioResposta.nmMeioResposta}"
                                               itemValue="#{meioResposta}" 
                                               />
                                <p:ajax event="change" process="@this"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia' and security.manifestante}">
                        <p:column style="font-weight: bold;">Nº Protocolo Prestadora de Serviço: </p:column>  
                        <p:column style="font-weight: bold;">
                        	<p:inputText id="nrPronac" value="#{mBManifestacaoCadastrar.manifestacao.nrPronac}" maxlength="50" title="Informe o número do Protocolo" style="width: 250px;">
                        	</p:inputText>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia' and security.manifestante}">
                        <p:column style="font-weight: bold;">Nº Processo AGR: </p:column>  
                        <p:column style="font-weight: bold;">
                        	<p:inputText id="nrProcesso" value="#{mBManifestacaoCadastrar.manifestacao.nrProcesso}" maxlength="50" title="Informe o número do Processo" style="width: 250px;">
                        	</p:inputText>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">CEP: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputMask required="true" requiredMessage="Informe um CEP" value="#{mBManifestacaoCadastrar.manifestacao.nrCEP}" mask="99999-999" maxlength="9" style="width:250px;" title="Informe o seu CEP" >
                                <p:ajax event="blur" listener="#{mBManifestacaoCadastrar.ajustaCep()}" update="endereco,bairro,pais,slcEstado,localidade" />
                            </p:inputMask>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Endereço: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputText required="true" requiredMessage="Informe o endereço" id="endereco" value="#{mBManifestacaoCadastrar.manifestacao.enEndereco}" style="width:250px;" title="Informe seu Endereço" />
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Número: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputText id="numero" value="#{mBManifestacaoCadastrar.manifestacao.nrEndereco}" style="width:50px;" title="Informe o número do endereço" converterMessage="Campo número só aceita digitos numéricos" />
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Bairro: *</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputText required="true" requiredMessage="Informe o bairro" id="bairro" value="#{mBManifestacaoCadastrar.manifestacao.dsBairro}" style="width:250px;" title="Informe o seu bairro" />
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Complemento: </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:inputText value="#{mBManifestacaoCadastrar.manifestacao.dsComplemento}" style="width:250px;" title="Informe o complemento do endereço" />
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">País: <h:outputLabel value="*" rendered="#{mBManifestacaoCadastrar.campoObrigatorio}" /></p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu id="pais" value="#{mBManifestacaoCadastrar.idPais}" style="width: 250px" required="#{mBManifestacaoCadastrar.campoObrigatorio}" requiredMessage="Informe um país">
                                <f:selectItems value="#{localidadeBean.paises}"
                                               var="pais"
                                               itemLabel="#{pais.nmPais}"
                                               itemValue="#{pais.idPais}" 
                                               />
                                <p:ajax update="slcEstado" event="change" />
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Estado:</p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu 
                                id="slcEstado"
                                style="width: 250px"
                                value="#{mBManifestacaoCadastrar.idUf}"
                                required="true"
                                requiredMessage="Selecione o estado">
                                <f:selectItem itemLabel=" - Selecione -"
                                              itemValue="" />
                                <f:selectItems value="#{localidadeBean.estados}"
                                               var="uf"
                                               itemLabel="#{uf.nmUF}"
                                               itemValue="#{uf.idUF}" />
                                <p:ajax event="change" process="@this"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                    
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Cidade: </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:autoComplete id="localidade" minQueryLength="2" size="32"
                            	value="#{mBManifestacaoCadastrar.manifestacao.dsLocalidade}"
                            	completeMethod="#{mBManifestacaoCadastrar.completaMunicipio}"
                            	required="true"
                            	requiredMessage="Informe a cidade" />
                        </p:column>
                    </p:row>
                    
                    <!-- 
                    <p:row rendered="#{not mBManifestacaoCadastrar.anonimo and mBManifestacaoCadastrar.tipoPessoaFisica}">
                        <p:column style="font-weight: bold;">Raça: </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:selectOneMenu id="slcRaca" 
                            				 style="width: 250px"
                                             value="#{mBManifestacaoCadastrar.manifestacao.tpRaca}">  
                                <f:selectItem itemLabel="- Selecione -" />
                                <f:selectItems value="#{mBEnum.racaEnums}" var="raca" itemLabel="#{raca.descricao}" itemValue="#{raca.id}"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                     -->
                    
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">
                        <p:column style="font-weight: bold;">Texto da manifestação: *
                        	<br/><br/><br/>
                        	<h:outputText style="font-size: 11px; font-weight: normal;" value="Digite na caixa ao lado o texto detalhado da sua manifestação."/>
                        	<p:commandButton icon="ui-icon-lightbulb" process="@none" update="@none"/>
                        </p:column>  
                        <p:column style="font-weight: bold;">
                            <p:editor value="#{mBManifestacaoCadastrar.manifestacao.dsTextoManifestacao}" 
                                      width="600" 
                                      required="true" 
                                      requiredMessage="Informe o texto da manifestação"
                                      style="font-size: 10px;"
                                      />
                        </p:column>
                    </p:row>  
                    <p:row id="arquivo" rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">  
                        <p:column style="font-weight: bold;">Arquivo(s):
                            <div style="background-color: wheat;">
                                Tamanho: 10M por arquivo<br/>
                                Tipos: gif, jpeg, jpg, png, doc, docx, ppt, pptx, pdf, xls, xlsx, zip, rar, rtf
                            </div>
                        </p:column>

                        <p:column style="font-weight: bold;">
                            <p:fileUpload fileUploadListener="#{mBManifestacaoCadastrar.handleFileUpload}"  
                                          mode="advanced"  
                                          update="panelFile"   
                                          multiple="true"  
                                          label="Adicionar arquivo"
                                          invalidFileMessage="Tipo de arquivo inválido (permitidos: gif, jpeg, jpg, png, doc, docx, pdf, xls, xlsx, zip, rar, rtf, ppt, pptx)"
										  invalidSizeMessage="Tamanho do arquivo inválido (máximo 10 megabytes)"
										  sizeLimit="10485760"
										  allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|ppt|pptx|pdf|xls|xlsx|zip|rar|rtf)$/"
                                          auto="true" />
                            <h4>Arquivo(s) enviado(s):</h4>
                            <p:outputPanel id="panelFile">
                                <table>
                                    <ui:repeat value="#{mBManifestacaoCadastrar.arquivos}" var="arquivo" varStatus="x">
                                        <tr bgcolor="#CCCCCC">
                                            <td>
                                                <h:outputText style="font-size: 10px;" value="#{x.index + 1}"/> - <h:outputText style="font-size: 10px;" value="#{arquivo.nmAnexo}"/>
                                            </td>
                                            <td>
                                                <p:commandButton 
                                                    icon="ui-icon-close" 
                                                    title="Excluir"
                                                    actionListener="#{mBManifestacaoCadastrar.removerArquivo(arquivo)}"
                                                    process="@this"
                                                    immediate="true"
                                                    update=":frmNovaManifestacao:panelFile"
                                                    >
                                                </p:commandButton>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </table>
                            </p:outputPanel>
                        </p:column>
                    </p:row>  
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao == 'energia'}">
                    	<p:column colspan="2">
	                    	<h:panelGroup>
	                    	<h3><u><b>ATENÇÃO!</b></u></h3>
	                    	<div style="font-size: 11px;">
	                    	<p>
								Informamos que a Ouvidoria da AGR em casos de manifestações referentes à energia 
								elétrica somente atende através de convênio com a Agência Nacional de Energia 
								Elétrica – ANEEL. 
	                    	</p>
							<p>
								Antes de se manifestar junto a esta Agência Reguladora V.S.ª deverá formalizar 
								manifestação junto a sua concessionária seguindo o <b>“Caminho do Entendimento”.</b>
							</p>
							<p>
								Caso sua concessionária seja a <b>CELG DISTRIBUIÇÃO S.A. – CELG D</b>, deverá se 
								encaminhar ao primeiro nível de atendimento da concessionária pelos meios: Presencial, 
								Agência Virtual, Agências Vapt Vupt ou ainda pelo teleatendimento 0800 62 0196, o 
								prazo de resposta é de até 05 dias. Não havendo resposta deverá registrar manifestação 
								no segundo nível que equivale à Ouvidoria da Celg pelo 0800 062 1500, o prazo neste 
								nível é de até 15 dias. 
							</p>
							<p>
								Caso sua concessionária seja a <b>COMPANHIA HIDROELÉTRICA SÃO PATRÍCIO 
								– CHESP</b>, deverá se encaminhar ao primeiro nível de atendimento da concessionária 
								pelos meios: Presencial, Site, ou ainda pelo teleatendimento 0800 62 2003, o prazo de 
								resposta é de até 05 dias. Não havendo resposta deverá registrar manifestação no 
								segundo nível que equivale à Ouvidoria da Chesp pelos telefones 0800 648 2030 ou 
								(62) 3323-1841, o prazo neste nível é de até 15 dias.
							</p>
							<p>
								Após, caso ainda não tenha resposta ou a mesma não seja satisfatória, deverá procurar o 
								terceiro nível de atendimento que equivale a Agência Reguladora pelo 0800 727 0167, 
								onde é necessário portar todos os protocolos já registrados nos níveis anteriores. 
							</p>
							<p>
								<b><i>Os procedimentos acima descritos estão presentes nos Artigos 201 e 202 da Resolução Normativa 
								414/2010 da ANEEL.</i></b>
							</p>
	                    	</div>
	                    	</h:panelGroup>
                    	</p:column>
                    </p:row>
                    <p:row rendered="#{mBManifestacaoCadastrar.manifestacao.tipoSolicitacao != 'energia'}">  
                        <p:column colspan="2" style="text-align: center; ">
                            <p:panelGrid style="width: 100%">
                                <p:row>
                                    <p:column style="text-align: center; width: 10%" styleClass="ui-widget-header">
                                        <p:commandButton id="cbNovoSalvar" value="Enviar" ajax="true" 
                                                         oncomplete="if (!args.validationFailed){cd.show()};" 
                                                         type="submit" update="frmNovaManifestacao" />
                                        <p:commandButton style="margin-left: 10px;" id="cbEncerrarScript" value="Encerrar Por Script" ajax="true" 
                                                         oncomplete="if (!args.validationFailed){cd2.show()};" 
                                                         type="submit" update="frmNovaManifestacao, :modalEncerramento" rendered="#{!security.manifestante}" />
                                    </p:column>
                                </p:row>
                            </p:panelGrid>
                        </p:column>  
                    </p:row>   
                </p:panelGrid>
            </p:panel>  
        </h:form>
        
        <p:confirmDialog appendToBody="true" closable="false" widgetVar="cd" header="Cadastrar Manifestação"
                         message="Tem certeza que deseja cadastrar a manifestação?">
            <h:form>
                <p:commandButton value="Sim, cadastrar" 
                                 ajax="true" icon="ui-icon-check"
                                 styleClass="ui-confirmdialog-yes"
                                 update=":frmNovaManifestacao" 
                                 actionListener="#{mBManifestacaoCadastrar.cadastrar}" 
                                 onclick="cd.hide();"/>
                <p:commandButton value="Não, rever informações" 
                                 ajax="true" icon="ui-icon-close"
                                 styleClass="ui-confirmdialog-no" 
                                 type="button"
                                 onclick="cd.hide();" />
            </h:form>
        </p:confirmDialog>
        
        <p:confirmDialog appendToBody="true" closable="false" widgetVar="cd2" header="Encerramento por script"
                         message="Tem certeza que deseja cadastrar a manifestação por script?" width="1000">
            <h:form id="modalEncerramento">
					
					<p:outputPanel rendered="#{not security.manifestante}">
						<p:panelGrid id="pnlMasterComunicacaoExterna" style="height: auto; margin: 0 auto">
							<p:row>
								<p:column style="width: 50%;vertical-align: top" colspan="2">
									<p:panelGrid style="width: 100%; margin: 0 auto; vertical-align: top;">
										<p:row>
											<p:column style="width: 15%" styleClass="ui-widget-header centro">Mensagem de Resposta por Script</p:column>
										</p:row>
										<p:row>
											<p:column>
												<p:editor widgetVar="editorMensagemAoManifestante"
													rendered="true"
													value="#{mBManifestacaoCadastrar.manifestacao.dsTextoEncerramentoScript}"
													id="textoMensagemAoManifestante"
													styleClass="classIdCampo_textoMensagemAoManifestante"
													height="320"
													required="true"
													requiredMessage="Informe um texto para enviar ao manifestante." />
											</p:column>
										</p:row>
									</p:panelGrid>
								</p:column>
								<p:column style="width: 50%; vertical-align: top;" colspan="2">
									<p:panelGrid
										style="width: 100%; margin: 0 auto; vertical-align: central;">
										<p:row>
											<p:column styleClass="ui-widget-header centro"
												style="vertical-align: top">  
	                                            Respostas personalizadas
	                                        </p:column>
										</p:row>
										<p:row>
											<p:column>
												<p:selectOneMenu
													value="#{mBManifestacaoCadastrar.manifestacao.dsTextoEncerramentoScript}"
													id="slcRespostaManifestacao">
													<f:selectItem itemLabel="- Selecionar resposta -" itemValue="" />
													<f:selectItems
														value="#{mBManifestacaoCadastrar.respostasManifestacao}" var="item"
														itemLabel="#{item.dsTituloResposta}"
														itemValue="#{item.dsResposta}" />
													<p:ajax update="@form" event="change" />
												</p:selectOneMenu>
											</p:column>
										</p:row>
										<p:row>
											<p:column colspan="2">
												<p:editor id="modeloRespostaManifestacao"
													styleClass="classIdCampo_modeloRespostaPadronizado"
													value="#{mBManifestacaoCadastrar.manifestacao.dsTextoEncerramentoScript}"
													disabled="true" height="290" />
											</p:column>
										</p:row>
									</p:panelGrid>
								</p:column>
							</p:row>
						</p:panelGrid>
					</p:outputPanel>
            
                <p:commandButton value="Sim, cadastrar e encerrar" 
                                 ajax="true" icon="ui-icon-check"
                                 styleClass="ui-confirmdialog-yes"
                                 update=":frmNovaManifestacao" 
                                 actionListener="#{mBManifestacaoCadastrar.encerrarPorScript}" 
                                 onclick="cd2.hide();" style="margin-left: 30%;"/>
                <p:commandButton value="Não, rever informações" 
                                 ajax="true" icon="ui-icon-close"
                                 styleClass="ui-confirmdialog-no" 
                                 type="button"
                                 onclick="cd2.hide();" />
            </h:form>
        </p:confirmDialog>

    </ui:define>
</ui:composition>